{"version":3,"sources":["images/Logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Footer.js","components/ImagePopup.js","utils/Api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","props","user","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","onClick","onCardClick","type","aria-label","onCardDelete","onCardLike","length","Main","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","PopupWithForm","isOpen","onClose","onSubmit","title","button","children","noValidate","EditProfilePopup","useEffect","setName","setDescription","useState","description","e","preventDefault","onUpdateUser","minLength","maxLength","placeholder","id","value","onChange","target","required","EditAvatarPopup","inputRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","inputNameRef","inputLinkRef","Footer","ImagePopup","api","config","this","_url","url","_headers","headers","fetch","method","then","_checkResponse","res","ok","json","Promise","reject","status","all","getAllCards","getUserInfo","body","JSON","stringify","likeCard","deleteLike","cardId","authorization","App","setCards","data","catch","err","console","log","currentUser","setCurrentUser","selectedCard","setSelectedCard","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","closeAllPopups","Provider","changeLikeCardStatus","newCard","state","c","deleteCard","filter","changeUserInfo","addNewCard","changeUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7866e1a7.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo.9acae848.svg\";","import React from \"react\";\r\nimport logo from \"../images/Logo.svg\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"логотип\" className=\"header__logo\" />\r\n    </header>\r\n  );\r\n}\r\nexport default Header;\r\n","import React from \"react\";\r\n\r\n const CurrentUserContext = React.createContext()\r\n export default CurrentUserContext","import React from \"react\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card(props) {\r\n    const user = React.useContext(CurrentUserContext)\r\n    const isOwn = props.card.owner._id === user._id\r\n    const cardDeleteButtonClassName = (\r\n        `element__delete-button ${isOwn ? '' : 'element__delete-button_visible'}`\r\n      ); \r\n      const isLiked = props.card.likes.some(i => i._id === user._id);\r\n      const cardLikeButtonClassName = (\r\n        `element__button-like ${isLiked ? 'element__button-like_active' : ''}`\r\n      ); \r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card)\r\n  }\r\n  function handleDeleteCard() {\r\n    props.onCardDelete(props.card)\r\n  }\r\n  return (\r\n    <article className=\"element\">\r\n      <img\r\n        src={props.card.link}\r\n        alt={props.card.name}\r\n        className=\"element__photo\"\r\n        onClick={handleClick}\r\n      />\r\n      {isOwn &&\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Удалить\"\r\n        className={cardDeleteButtonClassName}\r\n        onClick={handleDeleteCard}\r\n      ></button>}\r\n      <div className=\"element__subline\">\r\n        <h2 className=\"element__title\">{props.card.name}</h2>\r\n        <div className=\"element__block-like\">\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Нравится\"\r\n            className={cardLikeButtonClassName}\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <p className=\"element__quantity-likes\">{props.card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\nexport default Card;\r\n","import React from \"react\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\nimport Card from \"./Card\";\r\nfunction Main(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n  return (\r\n    <main>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__div-avatar\">\r\n          <img src={user.avatar} alt=\"аватар\" className=\"profile__avatar\" />\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Изменить\"\r\n            className=\"profile__change-button\"\r\n            onClick={props.onEditAvatar}\r\n          ></button>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{user.name}</h1>\r\n          <button\r\n            type=\"button\"\r\n            className=\"profile__edit-button\"\r\n            onClick={props.onEditProfile}\r\n          ></button>\r\n          <p className=\"profile__job\">{user.about}</p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          className=\"profile__add-button\"\r\n          onClick={props.onAddPlace}\r\n        ></button>\r\n      </section>\r\n      <section className=\"elements\">\r\n        {props.cards.map((card) => (\r\n          <Card\r\n            key={card._id}\r\n            card={card}\r\n            onCardClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />\r\n        ))}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm({ isOpen, onClose, onSubmit, name, title, button, children }) {\r\n  return (\r\n    <div className={`popup popup_${name} ${isOpen ? \"popup_opened\" : \"\"}`}>\r\n      <form\r\n        name={name}\r\n        className={`popup__container popup__container_${name}`}\r\n        onSubmit={onSubmit}\r\n        noValidate\r\n      >\r\n        <button\r\n          type=\"reset\"\r\n          className={`popup__close-button popup__close-button_${name}`}\r\n          onClick={onClose}\r\n        ></button>\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        {children}\r\n        <button type=\"submit\" className={`popup__button popup__button_${name}`}>\r\n          {button}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nexport default PopupWithForm;\r\n","import React from 'react'\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditProfilePopup(props) {\r\n    const user = React.useContext(CurrentUserContext)\r\n    React.useEffect(() => {\r\n        setName(user.name);\r\n        setDescription(user.about);\r\n      }, [user]); \r\n    const [name, setName] = React.useState('')\r\n    const [description, setDescription] = React.useState('')\r\n    function handleNameChange(e){\r\n        setName(e.target.value)\r\n    }\r\n    function handleDescriptionChange(e) {\r\n        setDescription(e.target.value)\r\n    }\r\n    function handleSubmit(e) {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n      \r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onUpdateUser({\r\n          name: name,\r\n          about: description,\r\n        });\r\n      }\r\n    return(\r\n        <PopupWithForm\r\n              isOpen={props.isOpen}\r\n              onClose={props.onClose}\r\n              onSubmit={handleSubmit}\r\n              name=\"profile\"\r\n              title=\"Редактировать профиль\"\r\n              button=\"Сохранить\"\r\n            >\r\n              <input\r\n                minLength=\"2\"\r\n                maxLength=\"40\"\r\n                type=\"text\"\r\n                placeholder=\"Имя\"\r\n                name=\"name\"\r\n                id=\"name-input\"\r\n                value={name}\r\n                onChange={handleNameChange}\r\n                className=\"popup__input popup__input_type_name\"\r\n                required\r\n              />\r\n              <span id=\"name-input-error\" className=\"popup__error\"></span>\r\n              <input\r\n                minLength=\"2\"\r\n                maxLength=\"200\"\r\n                type=\"text\"\r\n                name=\"job\"\r\n                id=\"job-input\"\r\n                placeholder=\"О себе\"\r\n                value={description}\r\n                onChange={handleDescriptionChange}\r\n                className=\"popup__input popup__input_type_job\"\r\n                required\r\n              />\r\n              <span id=\"job-input-error\" className=\"popup__error\"></span>\r\n            </PopupWithForm>\r\n    )\r\n}\r\nexport default EditProfilePopup","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n    const inputRef = React.useRef('')\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n      \r\n        props.onUpdateAvatar({\r\n          avatar: inputRef.current.value,\r\n        });\r\n        \r\n      }\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"change-avatar\"\r\n      title=\"Обновить аватар\"\r\n      button=\"Сохранить\"\r\n    >\r\n      <input\r\n        type=\"url\"\r\n        name=\"link\"\r\n        id=\"avatar-link-input\"\r\n        ref={inputRef}\r\n        placeholder=\"Ссылка на аватар\"\r\n        className=\"popup__input popup__input_change-avatar\"\r\n        required\r\n      />\r\n      <span id=\"avatar-link-input-error\" className=\"popup__error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nfunction AddPlacePopup(props) {\r\n    const inputNameRef = React.useRef('')\r\n    const inputLinkRef = React.useRef('')\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n      \r\n        props.onAddPlace({\r\n          name: inputNameRef.current.value,\r\n          link: inputLinkRef.current.value\r\n        });\r\n        \r\n      }\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"add\"\r\n      title=\"Новое место\"\r\n      button=\"Создать\"\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Название\"\r\n        name=\"place\"\r\n        id=\"place-input\"\r\n        ref={inputNameRef}\r\n        className=\"popup__input popup__input_place_name\"\r\n        required\r\n      />\r\n      <span id=\"place-input-error\" className=\"popup__error\"></span>\r\n      <input\r\n        type=\"url\"\r\n        name=\"link\"\r\n        id=\"link-input\"\r\n        ref={inputLinkRef}\r\n        placeholder=\"Ссылка на картинку\"\r\n        className=\"popup__input popup__input_place_link\"\r\n        required\r\n      />\r\n      <span id=\"link-input-error\" className=\"popup__error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default AddPlacePopup","import React from \"react\";\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p>&copy;2021 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <div className={`popup popup_img ${card && \"popup_opened\"}`}>\r\n      <article className=\"popup__img-article\">\r\n        <button\r\n          type=\"reset\"\r\n          className=\"popup__close-button popup__close-button_img\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <img\r\n          className=\"popup__image\"\r\n          src={card ? card.link : \"#\"}\r\n          alt={card ? card.name : \"#\"}\r\n        />\r\n        <p className=\"popup__img-caption\">{card ? card.name : \"\"} </p>\r\n      </article>\r\n    </div>\r\n  );\r\n}\r\nexport default ImagePopup;\r\n","class Api {\r\n    constructor(config){\r\n        this._url = config.url;\r\n        this._headers = config.headers\r\n    }\r\n    getAllCards() {\r\n        return fetch(`${this._url}/cards`,\r\n        {method: 'GET',\r\n            headers: this._headers})\r\n            .then(this._checkResponse)\r\n        }\r\n        _checkResponse(res) {\r\n            if (res.ok) {\r\n                return res.json();}\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            \r\n        }\r\n    getUserInfo() {\r\n        return fetch(`${this._url}/users/me`,\r\n        {method: 'GET',\r\n            headers: this._headers})\r\n            .then(this._checkResponse)\r\n        }\r\n    getAllNeededData() {\r\n        return Promise.all([this.getAllCards(), this.getUserInfo()])\r\n    }    \r\n    changeUserInfo(name, about) {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              name: name,\r\n              about: about\r\n            })\r\n          }).then(this._checkResponse); \r\n    }\r\n    addNewCard(name, link) {\r\n        return fetch(`${this._url}/cards`,\r\n        {method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              name: name,\r\n              link: link\r\n            })\r\n        }).then(this._checkResponse)\r\n    }\r\n    changeUserAvatar(avatar){\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              avatar: avatar\r\n            })\r\n          }).then(this._checkResponse);\r\n    }\r\n    changeLikeCardStatus(id, isLiked) {\r\n        if(isLiked) {\r\n            return this.likeCard(id)\r\n        }\r\n         return this.deleteLike(id)\r\n    }\r\n    likeCard(cardId) {\r\n        return fetch(`${this._url}/cards/likes/${cardId}`,{\r\n            method: 'PUT',\r\n            headers: this._headers\r\n        }\r\n        )\r\n        .then(this._checkResponse)\r\n    }\r\n    deleteLike(cardId) {\r\n        return fetch(`${this._url}/cards/likes/${cardId}`,{\r\n            method: 'DELETE',\r\n            headers: this._headers\r\n        }\r\n        )\r\n        .then(this._checkResponse)\r\n    }\r\n    deleteCard(cardId) {\r\n        return fetch(`${this._url}/cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n    }\r\n    const api = new Api({\r\n        url: 'https://mesto.nomoreparties.co/v1/cohort-23',\r\n        headers: {\r\n          authorization: '214a54ce-1055-4190-abb2-8e0a2b6796dd',\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\nexport default api","import React from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport EditProfilePopup from \"./EditProfilePopup\"\nimport EditAvatarPopup from \"./EditAvatarPopup\"\nimport AddPlacePopup from \"./AddPlacePopup\"\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/Api\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nfunction App() {\n  const [cards, setCards] = React.useState([]);\n  React.useEffect(() => {\n    api\n      .getAllCards()\n      .then((data) => {\n        setCards(data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n    });\n  }\n  function handleCardDelete(card) {\n    api.deleteCard(card._id);\n    setCards((state) => \n    state.filter(c => c._id !== card._id))\n  }\n  const [currentUser, setCurrentUser] = React.useState(\"\");\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((data) => {\n        setCurrentUser(data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function closeAllPopups() {\n    setIsAddPlacePopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n  }\n  function handleUpdateAvatar({avatar}) {\n    api.changeUserAvatar(avatar)\n    .then((data) => {\n      console.log(data)\n      setCurrentUser(data);\n    }).catch((err) => {\n      console.log(err)\n    })\n    closeAllPopups()\n  }\n  function handleUpdateUser({name, about}) {\n    api\n      .changeUserInfo(name, about)\n      .then((data) => {\n        console.log(data)\n        setCurrentUser(data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n      closeAllPopups()\n  }\n  function handleAddPlaceSumit({name, link}) {\n    api\n    .addNewCard(name, link)\n    .then((newCard) => {\n      console.log(newCard)\n      setCards([newCard, ...cards])\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n    closeAllPopups()\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"background-color\">\n        <div className=\"App\">\n          <div className=\"page\">\n            <Header />\n            <Main\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={setSelectedCard}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n            />\n            <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n            <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n            <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSumit}/>\n            <PopupWithForm\n              isOpen={false}\n              onClose={closeAllPopups}\n              name=\"delete\"\n              title=\"Вы уверены?\"\n              button=\"Да\"\n            ></PopupWithForm>\n            <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n            <Footer />\n          </div>\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}